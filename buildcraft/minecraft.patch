diff -u -r ../src_base/minecraft_server/net/minecraft/server/MinecraftServer.java ../src/minecraft_server/net/minecraft/server/MinecraftServer.java
--- ../src_base/minecraft_server/net/minecraft/server/MinecraftServer.java	2011-06-02 23:10:29.443864400 +0200
+++ ../src/minecraft_server/net/minecraft/server/MinecraftServer.java	2011-06-02 23:10:33.043070300 +0200
@@ -330,41 +330,22 @@
             }
             finally
             {
-                System.exit(0);
+                    try
+                    {
+                            stopServer();
+                            serverStopped = true;
+                    }
+                    catch(Throwable throwable2)
+                    {
+                            throwable2.printStackTrace();
+                    }
+                    finally
+                    {
+                            System.exit(0);
+                    }
             }
-            break MISSING_BLOCK_LABEL_350;
-        }
-        try
-        {
-            stopServer();
-            serverStopped = true;
-        }
-        catch(Throwable throwable)
-        {
-            throwable.printStackTrace();
-        }
-        finally
-        {
-            System.exit(0);
-        }
-        break MISSING_BLOCK_LABEL_350;
-        Exception exception2;
-        exception2;
-        try
-        {
-            stopServer();
-            serverStopped = true;
-        }
-        catch(Throwable throwable3)
-        {
-            throwable3.printStackTrace();
-        }
-        finally
-        {
-            System.exit(0);
-        }
-        throw exception2;
     }
+}
 
     private void doTick()
     {
diff -u -r ../src_base/minecraft_server/net/minecraft/src/EntityTracker.java ../src/minecraft_server/net/minecraft/src/EntityTracker.java
--- ../src_base/minecraft_server/net/minecraft/src/EntityTracker.java	2011-06-02 23:10:29.586872600 +0200
+++ ../src/minecraft_server/net/minecraft/src/EntityTracker.java	2011-06-02 23:27:02.121642300 +0200
@@ -6,6 +6,7 @@
 
 import java.util.*;
 import net.minecraft.server.MinecraftServer;
+import net.minecraft.src.buildcraft.api.ITrackedEntity;
 
 // Referenced classes of package net.minecraft.src:
 //            MCHash, ServerConfigurationManager, EntityPlayerMP, EntityTrackerEntry, 
@@ -98,6 +99,12 @@
         if(entity instanceof EntityPainting)
         {
             trackEntity(entity, 160, 0x7fffffff, false);
+        } else 
+        if (entity instanceof ITrackedEntity) {
+        	ITrackedEntity tracked = (ITrackedEntity) entity;
+        	
+			trackEntity(entity, tracked.getUpdateFrequency(),
+					tracked.getMaximumDistance(), false);
         }
         ModLoaderMp.HandleEntityTrackers(this, entity);
     }
diff -u -r ../src_base/minecraft_server/net/minecraft/src/EntityTrackerEntry.java ../src/minecraft_server/net/minecraft/src/EntityTrackerEntry.java
--- ../src_base/minecraft_server/net/minecraft/src/EntityTrackerEntry.java	2011-06-02 23:10:29.587872700 +0200
+++ ../src/minecraft_server/net/minecraft/src/EntityTrackerEntry.java	2011-06-02 23:31:00.973303900 +0200
@@ -6,6 +6,8 @@
 
 import java.util.*;
 
+import net.minecraft.src.buildcraft.api.ITrackedEntity;
+
 // Referenced classes of package net.minecraft.src:
 //            Entity, MathHelper, Packet34EntityTeleport, Packet33RelEntityMoveLook, 
 //            Packet31RelEntityMove, Packet32EntityLook, Packet28EntityVelocity, Packet, 
@@ -69,6 +71,13 @@
         field_28165_t++;
         if(++updateCounter % field_9234_e == 0)
         {
+            if (trackedEntity instanceof ITrackedEntity) {            	           	
+				sendPacketToTrackedPlayers(((ITrackedEntity) trackedEntity)
+						.getUpdatePacket());
+            	
+            	return;
+            }
+            
             int i = MathHelper.floor_double(trackedEntity.posX * 32D);
             int j = MathHelper.floor_double(trackedEntity.posY * 32D);
             int k = MathHelper.floor_double(trackedEntity.posZ * 32D);
@@ -227,6 +236,9 @@
         {
             return new Packet23VehicleSpawn(trackedEntity, i);
         }
+        if (trackedEntity instanceof ITrackedEntity) {
+        	return ((ITrackedEntity) trackedEntity).getSpawnPacket();
+        }
         if(trackedEntity instanceof EntityItem)
         {
             EntityItem entityitem = (EntityItem)trackedEntity;
